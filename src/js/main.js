/*!
 * Name    : Elements Extension for Jarallax
 * Version : 1.0.0
 * Author  : nK <https://nkdev.info>
 * GitHub  : https://github.com/nk-o/jarallax
 */!function(n){var o={};function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=n,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(n,t,e){"use strict";(function(t){var e;e="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},n.exports=e}).call(t,e(2))},function(t,e,n){"use strict";t.exports=function(t){"complete"===document.readyState||"interactive"===document.readyState?t.call():document.attachEvent?document.attachEvent("onreadystatechange",function(){"interactive"===document.readyState&&t.call()}):document.addEventListener&&document.addEventListener("DOMContentLoaded",t)}},function(t,e,n){"use strict";var o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(o=window)}t.exports=o},,function(t,e,n){t.exports=n(5)},function(t,e,n){"use strict";var o=r(n(1));function r(t){return t&&t.__esModule?t:{default:t}}(0,r(n(6)).default)(),(0,o.default)(function(){"undefined"!=typeof jarallax&&jarallax(document.querySelectorAll("[data-jarallax-element]"))})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i.default.jarallax;if(void 0===t)return;var e=t.constructor;["initImg","canInitParallax","init","destroy","clipContainer","coverImage","isVisible","onScroll","onResize"].forEach(function(p){var f=e.prototype[p];e.prototype[p]=function(){var t=this,e=arguments||[];if("initImg"===p&&null!==t.$item.getAttribute("data-jarallax-element")&&(t.options.type="element",t.pureOptions.speed=t.$item.getAttribute("data-jarallax-element")||t.pureOptions.speed),"element"!==t.options.type)return f.apply(t,e);switch(t.pureOptions.threshold=t.$item.getAttribute("data-threshold")||"",p){case"init":var n=t.pureOptions.speed.split(" ");t.options.speed=t.pureOptions.speed||0,t.options.speedY=n[0]?parseFloat(n[0]):0,t.options.speedX=n[1]?parseFloat(n[1]):0;var o=t.pureOptions.threshold.split(" ");t.options.thresholdY=o[0]?parseFloat(o[0]):null,t.options.thresholdX=o[1]?parseFloat(o[1]):null,t.onResize(),t.onScroll(),t.addToParallaxList();break;case"onResize":var r=t.css(t.$item,"transform");t.css(t.$item,{transform:""});var i=t.$item.getBoundingClientRect();t.itemData={width:i.width,height:i.height,y:i.top+t.getWindowData().y,x:i.left},t.css(t.$item,{transform:r});break;case"onScroll":var a=t.getWindowData(),s=(a.y+a.height/2-t.itemData.y-t.itemData.height/2)/(a.height/2),l=s*t.options.speedY,u=s*t.options.speedX,c=l,d=u;null!==t.options.thresholdY&&l>t.options.thresholdY&&(c=0),null!==t.options.thresholdX&&u>t.options.thresholdX&&(d=0),t.css(t.$item,{transform:"translate3d("+d+"px,"+c+"px,0)"});break;case"initImg":case"isVisible":case"clipContainer":case"coverImage":return!0}return f.apply(t,e)}})};var o,r=n(0),i=(o=r)&&o.__esModule?o:{default:o}}]);
//# sourceMappingURL=jarallax-element.min.js.map

/*!
 * Name    : Just Another Parallax [Jarallax]
 * Version : 1.10.3
 * Author  : nK <https://nkdev.info>
 * GitHub  : https://github.com/nk-o/jarallax
 */!function(o){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=o,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=11)}([function(o,e,t){"use strict";(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},o.exports=t}).call(e,t(2))},function(e,t,o){"use strict";e.exports=function(e){"complete"===document.readyState||"interactive"===document.readyState?e.call():document.attachEvent?document.attachEvent("onreadystatechange",function(){"interactive"===document.readyState&&e.call()}):document.addEventListener&&document.addEventListener("DOMContentLoaded",e)}},function(e,t,o){"use strict";var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(n=window)}e.exports=n},,,,,,,,,function(e,t,o){e.exports=o(12)},function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=l(o(1)),a=o(0),r=l(o(13));function l(e){return e&&e.__esModule?e:{default:e}}var s=a.window.jarallax;if(a.window.jarallax=r.default,a.window.jarallax.noConflict=function(){return a.window.jarallax=s,this},void 0!==a.jQuery){var c=function(){var e=arguments||[];Array.prototype.unshift.call(e,this);var t=r.default.apply(a.window,e);return"object"!==(void 0===t?"undefined":n(t))?t:this};c.constructor=r.default.constructor;var u=a.jQuery.fn.jarallax;a.jQuery.fn.jarallax=c,a.jQuery.fn.jarallax.noConflict=function(){return a.jQuery.fn.jarallax=u,this}}(0,i.default)(function(){(0,r.default)(document.querySelectorAll("[data-jarallax]"))})},function(e,$,j){"use strict";(function(e){Object.defineProperty($,"__esModule",{value:!0});var d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},t=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=a(j(1)),n=a(j(14)),i=j(0);function a(e){return e&&e.__esModule?e:{default:e}}var r=function(){for(var e="transform WebkitTransform MozTransform".split(" "),t=document.createElement("div"),o=0;o<e.length;o++)if(t&&void 0!==t.style[e[o]])return e[o];return!1}(),b=void 0,v=void 0,l=void 0,s=!1,c=!1;function u(e){b=i.window.innerWidth||document.documentElement.clientWidth,v=i.window.innerHeight||document.documentElement.clientHeight,"object"!==(void 0===e?"undefined":p(e))||"load"!==e.type&&"dom-loaded"!==e.type||(s=!0)}u(),i.window.addEventListener("resize",u),i.window.addEventListener("orientationchange",u),i.window.addEventListener("load",u),(0,o.default)(function(){u({type:"dom-loaded"})});var m=[],f=!1;function y(){if(m.length){l=void 0!==i.window.pageYOffset?i.window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;var t=s||!f||f.width!==b||f.height!==v,o=c||t||!f||f.y!==l;c=s=!1,(t||o)&&(m.forEach(function(e){t&&e.onResize(),o&&e.onScroll()}),f={width:b,height:v,y:l}),(0,n.default)(y)}}var g=!!e.ResizeObserver&&new e.ResizeObserver(function(e){e&&e.length&&(0,n.default)(function(){e.forEach(function(e){e.target&&e.target.jarallax&&(s||e.target.jarallax.onResize(),c=!0)})})}),h=0,x=function(){function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var o=this;o.instanceID=h++,o.$item=e,o.defaults={type:"scroll",speed:.5,imgSrc:null,imgElement:".jarallax-img",imgSize:"cover",imgPosition:"50% 50%",imgRepeat:"no-repeat",keepImg:!1,elementInViewport:null,zIndex:-100,disableParallax:!1,disableVideo:!1,automaticResize:!0,videoSrc:null,videoStartTime:0,videoEndTime:0,videoVolume:0,videoPlayOnlyVisible:!0,onScroll:null,onInit:null,onDestroy:null,onCoverImage:null};var n=o.$item.getAttribute("data-jarallax"),i=JSON.parse(n||"{}");n&&console.warn("Detected usage of deprecated data-jarallax JSON options, you should use pure data-attribute options. See info here - https://github.com/nk-o/jarallax/issues/53");var a=o.$item.dataset||{},r={};if(Object.keys(a).forEach(function(e){var t=e.substr(0,1).toLowerCase()+e.substr(1);t&&void 0!==o.defaults[t]&&(r[t]=a[e])}),o.options=o.extend({},o.defaults,i,r,t),o.pureOptions=o.extend({},o.options),Object.keys(o.options).forEach(function(e){"true"===o.options[e]?o.options[e]=!0:"false"===o.options[e]&&(o.options[e]=!1)}),o.options.speed=Math.min(2,Math.max(-1,parseFloat(o.options.speed))),(o.options.noAndroid||o.options.noIos)&&(console.warn("Detected usage of deprecated noAndroid or noIos options, you should use disableParallax option. See info here - https://github.com/nk-o/jarallax/#disable-on-mobile-devices"),o.options.disableParallax||(o.options.noIos&&o.options.noAndroid?o.options.disableParallax=/iPad|iPhone|iPod|Android/:o.options.noIos?o.options.disableParallax=/iPad|iPhone|iPod/:o.options.noAndroid&&(o.options.disableParallax=/Android/))),"string"==typeof o.options.disableParallax&&(o.options.disableParallax=new RegExp(o.options.disableParallax)),o.options.disableParallax instanceof RegExp){var l=o.options.disableParallax;o.options.disableParallax=function(){return l.test(navigator.userAgent)}}if("function"!=typeof o.options.disableParallax&&(o.options.disableParallax=function(){return!1}),"string"==typeof o.options.disableVideo&&(o.options.disableVideo=new RegExp(o.options.disableVideo)),o.options.disableVideo instanceof RegExp){var s=o.options.disableVideo;o.options.disableVideo=function(){return s.test(navigator.userAgent)}}"function"!=typeof o.options.disableVideo&&(o.options.disableVideo=function(){return!1});var c=o.options.elementInViewport;c&&"object"===(void 0===c?"undefined":p(c))&&void 0!==c.length&&(c=d(c,1)[0]);c instanceof Element||(c=null),o.options.elementInViewport=c,o.image={src:o.options.imgSrc||null,$container:null,useImgTag:!1,position:/iPad|iPhone|iPod|Android/.test(navigator.userAgent)?"absolute":"fixed"},o.initImg()&&o.canInitParallax()&&o.init()}return t(u,[{key:"css",value:function(t,o){return"string"==typeof o?i.window.getComputedStyle(t).getPropertyValue(o):(o.transform&&r&&(o[r]=o.transform),Object.keys(o).forEach(function(e){t.style[e]=o[e]}),t)}},{key:"extend",value:function(o){var n=arguments;return o=o||{},Object.keys(arguments).forEach(function(t){n[t]&&Object.keys(n[t]).forEach(function(e){o[e]=n[t][e]})}),o}},{key:"getWindowData",value:function(){return{width:b,height:v,y:l}}},{key:"initImg",value:function(){var e=this,t=e.options.imgElement;return t&&"string"==typeof t&&(t=e.$item.querySelector(t)),t instanceof Element||(t=null),t&&(e.options.keepImg?e.image.$item=t.cloneNode(!0):(e.image.$item=t,e.image.$itemParent=t.parentNode),e.image.useImgTag=!0),!!e.image.$item||(null===e.image.src&&(e.image.src=e.css(e.$item,"background-image").replace(/^url\(['"]?/g,"").replace(/['"]?\)$/g,"")),!(!e.image.src||"none"===e.image.src))}},{key:"canInitParallax",value:function(){return r&&!this.options.disableParallax()}},{key:"init",value:function(){var e=this,t={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},o={};if(!e.options.keepImg){var n=e.$item.getAttribute("style");if(n&&e.$item.setAttribute("data-jarallax-original-styles",n),e.image.useImgTag){var i=e.image.$item.getAttribute("style");i&&e.image.$item.setAttribute("data-jarallax-original-styles",i)}}if("static"===e.css(e.$item,"position")&&e.css(e.$item,{position:"relative"}),"auto"===e.css(e.$item,"z-index")&&e.css(e.$item,{zIndex:0}),e.image.$container=document.createElement("div"),e.css(e.image.$container,t),e.css(e.image.$container,{"z-index":e.options.zIndex}),e.image.$container.setAttribute("id","jarallax-container-"+e.instanceID),e.$item.appendChild(e.image.$container),e.image.useImgTag?o=e.extend({"object-fit":e.options.imgSize,"object-position":e.options.imgPosition,"font-family":"object-fit: "+e.options.imgSize+"; object-position: "+e.options.imgPosition+";","max-width":"none"},t,o):(e.image.$item=document.createElement("div"),e.image.src&&(o=e.extend({"background-position":e.options.imgPosition,"background-size":e.options.imgSize,"background-repeat":e.options.imgRepeat,"background-image":'url("'+e.image.src+'")'},t,o))),"opacity"!==e.options.type&&"scale"!==e.options.type&&"scale-opacity"!==e.options.type&&1!==e.options.speed||(e.image.position="absolute"),"fixed"===e.image.position)for(var a=0,r=e.$item;null!==r&&r!==document&&0===a;){var l=e.css(r,"-webkit-transform")||e.css(r,"-moz-transform")||e.css(r,"transform");l&&"none"!==l&&(a=1,e.image.position="absolute"),r=r.parentNode}o.position=e.image.position,e.css(e.image.$item,o),e.image.$container.appendChild(e.image.$item),e.coverImage(),e.clipContainer(),e.onScroll(!0),e.options.automaticResize&&g&&g.observe(e.$item),e.options.onInit&&e.options.onInit.call(e),"none"!==e.css(e.$item,"background-image")&&e.css(e.$item,{"background-image":"none"}),e.addToParallaxList()}},{key:"addToParallaxList",value:function(){m.push(this),1===m.length&&y()}},{key:"removeFromParallaxList",value:function(){var o=this;m.forEach(function(e,t){e.instanceID===o.instanceID&&m.splice(t,1)})}},{key:"destroy",value:function(){var e=this;e.removeFromParallaxList();var t=e.$item.getAttribute("data-jarallax-original-styles");if(e.$item.removeAttribute("data-jarallax-original-styles"),t?e.$item.setAttribute("style",t):e.$item.removeAttribute("style"),e.image.useImgTag){var o=e.image.$item.getAttribute("data-jarallax-original-styles");e.image.$item.removeAttribute("data-jarallax-original-styles"),o?e.image.$item.setAttribute("style",t):e.image.$item.removeAttribute("style"),e.image.$itemParent&&e.image.$itemParent.appendChild(e.image.$item)}e.$clipStyles&&e.$clipStyles.parentNode.removeChild(e.$clipStyles),e.image.$container&&e.image.$container.parentNode.removeChild(e.image.$container),e.options.onDestroy&&e.options.onDestroy.call(e),delete e.$item.jarallax}},{key:"clipContainer",value:function(){if("fixed"===this.image.position){var e=this,t=e.image.$container.getBoundingClientRect(),o=t.width,n=t.height;if(!e.$clipStyles)e.$clipStyles=document.createElement("style"),e.$clipStyles.setAttribute("type","text/css"),e.$clipStyles.setAttribute("id","jarallax-clip-"+e.instanceID),(document.head||document.getElementsByTagName("head")[0]).appendChild(e.$clipStyles);var i="#jarallax-container-"+e.instanceID+" {\n           clip: rect(0 "+o+"px "+n+"px 0);\n           clip: rect(0, "+o+"px, "+n+"px, 0);\n        }";e.$clipStyles.styleSheet?e.$clipStyles.styleSheet.cssText=i:e.$clipStyles.innerHTML=i}}},{key:"coverImage",value:function(){var e=this,t=e.image.$container.getBoundingClientRect(),o=t.height,n=e.options.speed,i="scroll"===e.options.type||"scroll-opacity"===e.options.type,a=0,r=o,l=0;return i&&(a=n<0?n*Math.max(o,v):n*(o+v),1<n?r=Math.abs(a-v):n<0?r=a/n+Math.abs(a):r+=Math.abs(v-o)*(1-n),a/=2),e.parallaxScrollDistance=a,l=i?(v-r)/2:(o-r)/2,e.css(e.image.$item,{height:r+"px",marginTop:l+"px",left:"fixed"===e.image.position?t.left+"px":"0",width:t.width+"px"}),e.options.onCoverImage&&e.options.onCoverImage.call(e),{image:{height:r,marginTop:l},container:t}}},{key:"isVisible",value:function(){return this.isElementInViewport||!1}},{key:"onScroll",value:function(e){var t=this,o=t.$item.getBoundingClientRect(),n=o.top,i=o.height,a={},r=o;if(t.options.elementInViewport&&(r=t.options.elementInViewport.getBoundingClientRect()),t.isElementInViewport=0<=r.bottom&&0<=r.right&&r.top<=v&&r.left<=b,e||t.isElementInViewport){var l=Math.max(0,n),s=Math.max(0,i+n),c=Math.max(0,-n),u=Math.max(0,n+i-v),d=Math.max(0,i-(n+i-v)),p=Math.max(0,-n+v-i),m=1-2*(v-n)/(v+i),f=1;if(i<v?f=1-(c||u)/i:s<=v?f=s/v:d<=v&&(f=d/v),"opacity"!==t.options.type&&"scale-opacity"!==t.options.type&&"scroll-opacity"!==t.options.type||(a.transform="translate3d(0,0,0)",a.opacity=f),"scale"===t.options.type||"scale-opacity"===t.options.type){var y=1;t.options.speed<0?y-=t.options.speed*f:y+=t.options.speed*(1-f),a.transform="scale("+y+") translate3d(0,0,0)"}if("scroll"===t.options.type||"scroll-opacity"===t.options.type){var g=t.parallaxScrollDistance*m;"absolute"===t.image.position&&(g-=n),a.transform="translate3d(0,"+g+"px,0)"}t.css(t.image.$item,a),t.options.onScroll&&t.options.onScroll.call(t,{section:o,beforeTop:l,beforeTopEnd:s,afterTop:c,beforeBottom:u,beforeBottomEnd:d,afterBottom:p,visiblePercent:f,fromViewportCenter:m})}}},{key:"onResize",value:function(){this.coverImage(),this.clipContainer()}}]),u}(),w=function(e){("object"===("undefined"==typeof HTMLElement?"undefined":p(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":p(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)&&(e=[e]);for(var t=arguments[1],o=Array.prototype.slice.call(arguments,2),n=e.length,i=0,a=void 0;i<n;i++)if("object"===(void 0===t?"undefined":p(t))||void 0===t?e[i].jarallax||(e[i].jarallax=new x(e[i],t)):e[i].jarallax&&(a=e[i].jarallax[t].apply(e[i].jarallax,o)),void 0!==a)return a;return e};w.constructor=x,$.default=w}).call($,j(2))},function(e,t,o){"use strict";var n=o(0),i=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(e){var t=+new Date,o=Math.max(0,16-(t-a)),n=setTimeout(e,o);return a=t,n},a=+new Date;var r=n.cancelAnimationFrame||n.webkitCancelAnimationFrame||n.mozCancelAnimationFrame||clearTimeout;Function.prototype.bind&&(i=i.bind(n),r=r.bind(n)),(e.exports=i).cancel=r}]);
//# sourceMappingURL=jarallax.min.js.map


/*!
 * in-view 0.6.1 - Get notified when a DOM element enters or exits the viewport.
 * Copyright (c) 2016 Cam Wiegert <cam@camwiegert.com> - https://camwiegert.github.io/in-view
 * License: MIT
 */
 
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.inView=e():t.inView=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(2),o=r(i);t.exports=o["default"]},function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),o=r(i),u=n(3),f=r(u),s=n(4),c=function(){if("undefined"!=typeof window){var t=100,e=["scroll","resize","load"],n={history:[]},r={offset:{},threshold:0,test:s.inViewport},i=(0,o["default"])(function(){n.history.forEach(function(t){n[t].check()})},t);e.forEach(function(t){return addEventListener(t,i)}),window.MutationObserver&&addEventListener("DOMContentLoaded",function(){new MutationObserver(i).observe(document.body,{attributes:!0,childList:!0,subtree:!0})});var u=function(t){if("string"==typeof t){var e=[].slice.call(document.querySelectorAll(t));return n.history.indexOf(t)>-1?n[t].elements=e:(n[t]=(0,f["default"])(e,r),n.history.push(t)),n[t]}};return u.offset=function(t){if(void 0===t)return r.offset;var e=function(t){return"number"==typeof t};return["top","right","bottom","left"].forEach(e(t)?function(e){return r.offset[e]=t}:function(n){return e(t[n])?r.offset[n]=t[n]:null}),r.offset},u.threshold=function(t){return"number"==typeof t&&t>=0&&t<=1?r.threshold=t:r.threshold},u.test=function(t){return"function"==typeof t?r.test=t:r.test},u.is=function(t){return r.test(t,r)},u.offset(0),u}};e["default"]=c()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,r){n(this,t),this.options=r,this.elements=e,this.current=[],this.handlers={enter:[],exit:[]},this.singles={enter:[],exit:[]}}return r(t,[{key:"check",value:function(){var t=this;return this.elements.forEach(function(e){var n=t.options.test(e,t.options),r=t.current.indexOf(e),i=r>-1,o=n&&!i,u=!n&&i;o&&(t.current.push(e),t.emit("enter",e)),u&&(t.current.splice(r,1),t.emit("exit",e))}),this}},{key:"on",value:function(t,e){return this.handlers[t].push(e),this}},{key:"once",value:function(t,e){return this.singles[t].unshift(e),this}},{key:"emit",value:function(t,e){for(;this.singles[t].length;)this.singles[t].pop()(e);for(var n=this.handlers[t].length;--n>-1;)this.handlers[t][n](e);return this}}]),t}();e["default"]=function(t,e){return new i(t,e)}},function(t,e){"use strict";function n(t,e){var n=t.getBoundingClientRect(),r=n.top,i=n.right,o=n.bottom,u=n.left,f=n.width,s=n.height,c={t:o,r:window.innerWidth-u,b:window.innerHeight-r,l:i},a={x:e.threshold*f,y:e.threshold*s};return c.t>e.offset.top+a.y&&c.r>e.offset.right+a.x&&c.b>e.offset.bottom+a.y&&c.l>e.offset.left+a.x}Object.defineProperty(e,"__esModule",{value:!0}),e.inViewport=n},function(t,e){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,function(){return this}())},function(t,e,n){var r=n(5),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){function r(t,e,n){function r(e){var n=x,r=m;return x=m=void 0,E=e,w=t.apply(r,n)}function a(t){return E=t,j=setTimeout(h,e),M?r(t):w}function l(t){var n=t-O,r=t-E,i=e-n;return _?c(i,g-r):i}function d(t){var n=t-O,r=t-E;return void 0===O||n>=e||n<0||_&&r>=g}function h(){var t=o();return d(t)?p(t):void(j=setTimeout(h,l(t)))}function p(t){return j=void 0,T&&x?r(t):(x=m=void 0,w)}function v(){void 0!==j&&clearTimeout(j),E=0,x=O=m=j=void 0}function y(){return void 0===j?w:p(o())}function b(){var t=o(),n=d(t);if(x=arguments,m=this,O=t,n){if(void 0===j)return a(O);if(_)return j=setTimeout(h,e),r(O)}return void 0===j&&(j=setTimeout(h,e)),w}var x,m,g,w,j,O,E=0,M=!1,_=!1,T=!0;if("function"!=typeof t)throw new TypeError(f);return e=u(e)||0,i(n)&&(M=!!n.leading,_="maxWait"in n,g=_?s(u(n.maxWait)||0,e):g,T="trailing"in n?!!n.trailing:T),b.cancel=v,b.flush=y,b}var i=n(1),o=n(8),u=n(10),f="Expected a function",s=Math.max,c=Math.min;t.exports=r},function(t,e,n){var r=n(6),i=function(){return r.Date.now()};t.exports=i},function(t,e,n){function r(t,e,n){var r=!0,f=!0;if("function"!=typeof t)throw new TypeError(u);return o(n)&&(r="leading"in n?!!n.leading:r,f="trailing"in n?!!n.trailing:f),i(t,e,{leading:r,maxWait:e,trailing:f})}var i=n(7),o=n(1),u="Expected a function";t.exports=r},function(t,e){function n(t){return t}t.exports=n}])});

var day, month, year, selectedDate, currentDate;
var age = 18;

var fullUrl = window.location.href;
var endUrl = fullUrl.split('/').pop();

function checkUrl() {
  if(endUrl == 'home.html' && location.hash !== 'loaded') {
    location.hash = 'loaded';
    window.location.assign('index.html');
  }
}

function checkAge() {
    var enterBtn = document.querySelector(".age-gate__enter");
    if(enterBtn) {
        enterBtn.addEventListener("click", function(event) {
        event.preventDefault();

          day = document.getElementById('age-gate__day');
        month = document.getElementById('age-gate__month');
         year = document.getElementById('age-gate__year');

         selectedDate = new Date();
         selectedDate.setFullYear( year.value, month.value - 1, day.value );
         currentDate = new Date();
         currentDate.setFullYear(currentDate.getFullYear() - age);

         if( day.value == 'notselected' || month.value == 'notselected' || year.value == 'notselected' ) {
           alert('Please enter your date of birth');
           return false;
         } else if ((currentDate - selectedDate) < 0) {
           alert('Entry denied, currently you are not of legal drinking age');
           return false;
         } else {
           window.location.assign("home.html#loaded");
         }
      });
    }
}

checkUrl();
checkAge();

var submit = document.querySelector('.button-submit');
var fullName = document.querySelector('.contact__full-name');
var phoneNumber = document.querySelector('.contact__phone');
var contactForm = document.querySelector('.contact__form');
var contactEmail = document.querySelector('.email-input');
var requiredNameMessage = document.querySelector('.required__name-message');
var requiredPhoneMessage = document.querySelector('.required__phone-message');
var incorrectFormatMessage = document.getElementsByClassName('incorrect__format-message');

var validateName = function(name) {
  var pattern = /^([^0-9][a-zA-Z]{0,}\s[a-zA-z]{0,}'?-?[a-zA-Z]{2,}\s?([a-zA-Z]{1,})?)/;
  return pattern.test(name);
}

var validatePhoneNumber = function(phoneNumber) {
  var pattern = /^0(1\d{9}|9\d{8})$/;
  return pattern.test(phoneNumber);
}

var validateEmail = function(emailAddress) {
  var pattern = /^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;
  return pattern.test(emailAddress);
}

var contactFormValidation = function() {
  fullName.addEventListener('keyup', function(event) {
    if(validateName(fullName.value)) {
      fullName.classList.remove('error-input');
      incorrectFormatMessage[0].classList.remove('warning-show');
      fullName.classList.add('success-input');
    } else {
      fullName.classList.remove('success-input');
      fullName.classList.add('error-input');
    }
  });

  phoneNumber.addEventListener('keyup', function(event) {
    if(validatePhoneNumber(phoneNumber.value)) {
      phoneNumber.classList.remove('error-input');
      incorrectFormatMessage[1].classList.remove('warning-show');
      phoneNumber.classList.add('success-input');
    } else {
      phoneNumber.classList.remove('success-input');
      phoneNumber.classList.add('error-input');
    }
  });

  contactEmail.addEventListener('keyup', function(event) {
    if(validateEmail(contactEmail.value)) {
      contactEmail.classList.remove('error-input');
      contactEmail.classList.add('success-input');
    } else {
      contactEmail.classList.remove('success-input');
      contactEmail.classList.add('error-input');
    }
  });

  submit.addEventListener('click', function(event) {
    event.preventDefault();
    if(fullName.value == '') {
      requiredNameMessage.classList.add('warning-show');
    } else if(fullName.value && validateName(fullName.value)) {
        incorrectFormatMessage[0].classList.remove('warning-show');
        requiredNameMessage.classList.remove('warning-show');
    } else if(fullName.value && !validateName(fullName.value)) {
        requiredNameMessage.classList.remove('warning-show');
        incorrectFormatMessage[0].classList.add('warning-show');
    }

    if(phoneNumber.value == '') {
      requiredPhoneMessage.classList.add('warning-show');
    } else if(phoneNumber.value && validatePhoneNumber(phoneNumber.value)) {
        incorrectFormatMessage[1].classList.remove('warning-show');
        requiredPhoneMessage.classList.remove('warning-show');
    } else if(phoneNumber.value && !validatePhoneNumber(phoneNumber.value)) {
        requiredPhoneMessage.classList.remove('warning-show');
        incorrectFormatMessage[1].classList.add('warning-show');
    }
  });
}

if(contactForm) {
  contactFormValidation();
}

var hamburger = document.querySelector('.hamburger');

if(hamburger) {
  hamburger.addEventListener('click', function(event) {
    event.preventDefault();
    if(hamburger.classList.contains('is-active')) {
      hamburger.classList.remove('is-active');
    } else {
      hamburger.classList.add('is-active');
    }
  });
}

var marginY = 0;
var scroller = null;
var destination = 0;

var speed = 5;

var heroScroll = document.querySelector(".hero__scroll");

function smoothScroll() {
  // get the number of pixels the document is scrolled along the Y(vertical) axis
  marginY = window.pageYOffset;
  // get the number of pixels distance, the element is from the top of it's parent node
  destination = document.getElementById("info-drink").offsetTop;

  // timeout function that executes after a small delay
  scroller = setTimeout(function() {
    // recursive function call on itself,  this creates the smooth scroll effect
    smoothScroll();
  }, 1);

  // increment the vertical scroll by 5 pixels each time to create smooth scroll
  marginY = marginY + speed;

  // stop timeout function executing when the vetical scroll is greater than or equal to the required scroll distance
  if(marginY >= destination) {
    clearTimeout(scroller);
  }

  /* call the scroll on the window passing values for the x and y coordinates at the top left, x = 0 as not concerned with x axis,
     y = marginY which will increment each because of recursion and create the smooth scroll effect
  */
  window.scroll(0, marginY);
}

if(heroScroll) {
  heroScroll.addEventListener('click', function(event) {
      /*  prevent the browsers default action from executing. In this the default action is a page reload because a anchor element
          with href="#" is being clicked
      */
      event.preventDefault();
      smoothScroll();
  });
}

function handleInview() {
  var hero = document.querySelector('.hero');
  var ageModal = document.querySelector('.age-modal');

  var arrElements = [{
      element: '.hero'
    },
    {
      element: '.age-modal'
    },
    {
      element: '.info-drink__title'
    },
    {
      element: '.info-drink__description'
    },
    {
      element: '.info-drink__image'
    },
    {
      element: '.info-drink__recipie'
    },
    {
      element: '.contact__title'
    },
    {
      element: '.contact__intro'
    },
    {
      element: '.contact__form'
    },
    {
      element: '.footer'
    },
  ];

  for (var i = 0; i < arrElements.length; i++) {
    if (document.querySelectorAll(arrElements[i].element).length > 0) {
      inView(arrElements[i].element)
        .on('enter', section => {
          section.classList.add('is-inview');
        });
    }
  }
}

handleInview();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImphcmFsbGF4L2phcmFsbGF4LWVsZW1lbnQubWluLmpzIiwiamFyYWxsYXgvamFyYWxsYXgubWluLmpzIiwiaW4tdmlldy9pbi12aWV3Lm1pbi5qcyIsImFnZS1nYXRlL2FnZS1nYXRlLmpzIiwiZm9ybS9mb3JtLmpzIiwiaGVhZGVyL2hlYWRlci5qcyIsImhlcm8vaGVyby5qcyIsInNlY3Rpb25zLWpzL2luLXZpZXctaGFuZGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBOYW1lICAgIDogRWxlbWVudHMgRXh0ZW5zaW9uIGZvciBKYXJhbGxheFxuICogVmVyc2lvbiA6IDEuMC4wXG4gKiBBdXRob3IgIDogbksgPGh0dHBzOi8vbmtkZXYuaW5mbz5cbiAqIEdpdEh1YiAgOiBodHRwczovL2dpdGh1Yi5jb20vbmstby9qYXJhbGxheFxuICovIWZ1bmN0aW9uKG4pe3ZhciBvPXt9O2Z1bmN0aW9uIHIodCl7aWYob1t0XSlyZXR1cm4gb1t0XS5leHBvcnRzO3ZhciBlPW9bdF09e2k6dCxsOiExLGV4cG9ydHM6e319O3JldHVybiBuW3RdLmNhbGwoZS5leHBvcnRzLGUsZS5leHBvcnRzLHIpLGUubD0hMCxlLmV4cG9ydHN9ci5tPW4sci5jPW8sci5kPWZ1bmN0aW9uKHQsZSxuKXtyLm8odCxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Om59KX0sci5uPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIHR9O3JldHVybiByLmQoZSxcImFcIixlKSxlfSxyLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LHIucD1cIlwiLHIoci5zPTQpfShbZnVuY3Rpb24obix0LGUpe1widXNlIHN0cmljdFwiOyhmdW5jdGlvbih0KXt2YXIgZTtlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnZvaWQgMCE9PXQ/dDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnt9LG4uZXhwb3J0cz1lfSkuY2FsbCh0LGUoMikpfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe1wiY29tcGxldGVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGV8fFwiaW50ZXJhY3RpdmVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGU/dC5jYWxsKCk6ZG9jdW1lbnQuYXR0YWNoRXZlbnQ/ZG9jdW1lbnQuYXR0YWNoRXZlbnQoXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixmdW5jdGlvbigpe1wiaW50ZXJhY3RpdmVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJnQuY2FsbCgpfSk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciYmZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIix0KX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgbyxyPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9O289ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7bz1vfHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCl8fCgwLGV2YWwpKFwidGhpc1wiKX1jYXRjaCh0KXtcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/XCJ1bmRlZmluZWRcIjpyKHdpbmRvdykpJiYobz13aW5kb3cpfXQuZXhwb3J0cz1vfSwsZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDUpfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG89cihuKDEpKTtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0oMCxyKG4oNikpLmRlZmF1bHQpKCksKDAsby5kZWZhdWx0KShmdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBqYXJhbGxheCYmamFyYWxsYXgoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWphcmFsbGF4LWVsZW1lbnRdXCIpKX0pfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5kZWZhdWx0PWZ1bmN0aW9uKCl7dmFyIHQ9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOmkuZGVmYXVsdC5qYXJhbGxheDtpZih2b2lkIDA9PT10KXJldHVybjt2YXIgZT10LmNvbnN0cnVjdG9yO1tcImluaXRJbWdcIixcImNhbkluaXRQYXJhbGxheFwiLFwiaW5pdFwiLFwiZGVzdHJveVwiLFwiY2xpcENvbnRhaW5lclwiLFwiY292ZXJJbWFnZVwiLFwiaXNWaXNpYmxlXCIsXCJvblNjcm9sbFwiLFwib25SZXNpemVcIl0uZm9yRWFjaChmdW5jdGlvbihwKXt2YXIgZj1lLnByb3RvdHlwZVtwXTtlLnByb3RvdHlwZVtwXT1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHN8fFtdO2lmKFwiaW5pdEltZ1wiPT09cCYmbnVsbCE9PXQuJGl0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1qYXJhbGxheC1lbGVtZW50XCIpJiYodC5vcHRpb25zLnR5cGU9XCJlbGVtZW50XCIsdC5wdXJlT3B0aW9ucy5zcGVlZD10LiRpdGVtLmdldEF0dHJpYnV0ZShcImRhdGEtamFyYWxsYXgtZWxlbWVudFwiKXx8dC5wdXJlT3B0aW9ucy5zcGVlZCksXCJlbGVtZW50XCIhPT10Lm9wdGlvbnMudHlwZSlyZXR1cm4gZi5hcHBseSh0LGUpO3N3aXRjaCh0LnB1cmVPcHRpb25zLnRocmVzaG9sZD10LiRpdGVtLmdldEF0dHJpYnV0ZShcImRhdGEtdGhyZXNob2xkXCIpfHxcIlwiLHApe2Nhc2VcImluaXRcIjp2YXIgbj10LnB1cmVPcHRpb25zLnNwZWVkLnNwbGl0KFwiIFwiKTt0Lm9wdGlvbnMuc3BlZWQ9dC5wdXJlT3B0aW9ucy5zcGVlZHx8MCx0Lm9wdGlvbnMuc3BlZWRZPW5bMF0/cGFyc2VGbG9hdChuWzBdKTowLHQub3B0aW9ucy5zcGVlZFg9blsxXT9wYXJzZUZsb2F0KG5bMV0pOjA7dmFyIG89dC5wdXJlT3B0aW9ucy50aHJlc2hvbGQuc3BsaXQoXCIgXCIpO3Qub3B0aW9ucy50aHJlc2hvbGRZPW9bMF0/cGFyc2VGbG9hdChvWzBdKTpudWxsLHQub3B0aW9ucy50aHJlc2hvbGRYPW9bMV0/cGFyc2VGbG9hdChvWzFdKTpudWxsLHQub25SZXNpemUoKSx0Lm9uU2Nyb2xsKCksdC5hZGRUb1BhcmFsbGF4TGlzdCgpO2JyZWFrO2Nhc2VcIm9uUmVzaXplXCI6dmFyIHI9dC5jc3ModC4kaXRlbSxcInRyYW5zZm9ybVwiKTt0LmNzcyh0LiRpdGVtLHt0cmFuc2Zvcm06XCJcIn0pO3ZhciBpPXQuJGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dC5pdGVtRGF0YT17d2lkdGg6aS53aWR0aCxoZWlnaHQ6aS5oZWlnaHQseTppLnRvcCt0LmdldFdpbmRvd0RhdGEoKS55LHg6aS5sZWZ0fSx0LmNzcyh0LiRpdGVtLHt0cmFuc2Zvcm06cn0pO2JyZWFrO2Nhc2VcIm9uU2Nyb2xsXCI6dmFyIGE9dC5nZXRXaW5kb3dEYXRhKCkscz0oYS55K2EuaGVpZ2h0LzItdC5pdGVtRGF0YS55LXQuaXRlbURhdGEuaGVpZ2h0LzIpLyhhLmhlaWdodC8yKSxsPXMqdC5vcHRpb25zLnNwZWVkWSx1PXMqdC5vcHRpb25zLnNwZWVkWCxjPWwsZD11O251bGwhPT10Lm9wdGlvbnMudGhyZXNob2xkWSYmbD50Lm9wdGlvbnMudGhyZXNob2xkWSYmKGM9MCksbnVsbCE9PXQub3B0aW9ucy50aHJlc2hvbGRYJiZ1PnQub3B0aW9ucy50aHJlc2hvbGRYJiYoZD0wKSx0LmNzcyh0LiRpdGVtLHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIitkK1wicHgsXCIrYytcInB4LDApXCJ9KTticmVhaztjYXNlXCJpbml0SW1nXCI6Y2FzZVwiaXNWaXNpYmxlXCI6Y2FzZVwiY2xpcENvbnRhaW5lclwiOmNhc2VcImNvdmVySW1hZ2VcIjpyZXR1cm4hMH1yZXR1cm4gZi5hcHBseSh0LGUpfX0pfTt2YXIgbyxyPW4oMCksaT0obz1yKSYmby5fX2VzTW9kdWxlP286e2RlZmF1bHQ6b319XSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1qYXJhbGxheC1lbGVtZW50Lm1pbi5qcy5tYXBcbiIsIi8qIVxuICogTmFtZSAgICA6IEp1c3QgQW5vdGhlciBQYXJhbGxheCBbSmFyYWxsYXhdXG4gKiBWZXJzaW9uIDogMS4xMC4zXG4gKiBBdXRob3IgIDogbksgPGh0dHBzOi8vbmtkZXYuaW5mbz5cbiAqIEdpdEh1YiAgOiBodHRwczovL2dpdGh1Yi5jb20vbmstby9qYXJhbGxheFxuICovIWZ1bmN0aW9uKG8pe3ZhciBuPXt9O2Z1bmN0aW9uIGkoZSl7aWYobltlXSlyZXR1cm4gbltlXS5leHBvcnRzO3ZhciB0PW5bZV09e2k6ZSxsOiExLGV4cG9ydHM6e319O3JldHVybiBvW2VdLmNhbGwodC5leHBvcnRzLHQsdC5leHBvcnRzLGkpLHQubD0hMCx0LmV4cG9ydHN9aS5tPW8saS5jPW4saS5kPWZ1bmN0aW9uKGUsdCxvKXtpLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Om99KX0saS5uPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiBpLmQodCxcImFcIix0KSx0fSxpLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LGkucD1cIlwiLGkoaS5zPTExKX0oW2Z1bmN0aW9uKG8sZSx0KXtcInVzZSBzdHJpY3RcIjsoZnVuY3Rpb24oZSl7dmFyIHQ7dD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp2b2lkIDAhPT1lP2U6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp7fSxvLmV4cG9ydHM9dH0pLmNhbGwoZSx0KDIpKX0sZnVuY3Rpb24oZSx0LG8pe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHxcImludGVyYWN0aXZlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlP2UuY2FsbCgpOmRvY3VtZW50LmF0dGFjaEV2ZW50P2RvY3VtZW50LmF0dGFjaEV2ZW50KFwib25yZWFkeXN0YXRlY2hhbmdlXCIsZnVuY3Rpb24oKXtcImludGVyYWN0aXZlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlJiZlLmNhbGwoKX0pOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXImJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZSl9fSxmdW5jdGlvbihlLHQsbyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4saT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfTtuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCk7dHJ5e249bnx8RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpfHwoMCxldmFsKShcInRoaXNcIil9Y2F0Y2goZSl7XCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93P1widW5kZWZpbmVkXCI6aSh3aW5kb3cpKSYmKG49d2luZG93KX1lLmV4cG9ydHM9bn0sLCwsLCwsLCxmdW5jdGlvbihlLHQsbyl7ZS5leHBvcnRzPW8oMTIpfSxmdW5jdGlvbihlLHQsbyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0saT1sKG8oMSkpLGE9bygwKSxyPWwobygxMykpO2Z1bmN0aW9uIGwoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXZhciBzPWEud2luZG93LmphcmFsbGF4O2lmKGEud2luZG93LmphcmFsbGF4PXIuZGVmYXVsdCxhLndpbmRvdy5qYXJhbGxheC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEud2luZG93LmphcmFsbGF4PXMsdGhpc30sdm9pZCAwIT09YS5qUXVlcnkpe3ZhciBjPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzfHxbXTtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGUsdGhpcyk7dmFyIHQ9ci5kZWZhdWx0LmFwcGx5KGEud2luZG93LGUpO3JldHVyblwib2JqZWN0XCIhPT0odm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOm4odCkpP3Q6dGhpc307Yy5jb25zdHJ1Y3Rvcj1yLmRlZmF1bHQuY29uc3RydWN0b3I7dmFyIHU9YS5qUXVlcnkuZm4uamFyYWxsYXg7YS5qUXVlcnkuZm4uamFyYWxsYXg9YyxhLmpRdWVyeS5mbi5qYXJhbGxheC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEualF1ZXJ5LmZuLmphcmFsbGF4PXUsdGhpc319KDAsaS5kZWZhdWx0KShmdW5jdGlvbigpeygwLHIuZGVmYXVsdCkoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWphcmFsbGF4XVwiKSl9KX0sZnVuY3Rpb24oZSwkLGope1widXNlIHN0cmljdFwiOyhmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoJCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgZD1mdW5jdGlvbihlLHQpe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGU7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKSlyZXR1cm4gZnVuY3Rpb24oZSx0KXt2YXIgbz1bXSxuPSEwLGk9ITEsYT12b2lkIDA7dHJ5e2Zvcih2YXIgcixsPWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEobj0ocj1sLm5leHQoKSkuZG9uZSkmJihvLnB1c2goci52YWx1ZSksIXR8fG8ubGVuZ3RoIT09dCk7bj0hMCk7fWNhdGNoKGUpe2k9ITAsYT1lfWZpbmFsbHl7dHJ5eyFuJiZsLnJldHVybiYmbC5yZXR1cm4oKX1maW5hbGx5e2lmKGkpdGhyb3cgYX19cmV0dXJuIG99KGUsdCk7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIil9LHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKGUsdCl7Zm9yKHZhciBvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciBuPXRbb107bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSx0LG8pe3JldHVybiB0JiZuKGUucHJvdG90eXBlLHQpLG8mJm4oZSxvKSxlfX0oKSxwPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9LG89YShqKDEpKSxuPWEoaigxNCkpLGk9aigwKTtmdW5jdGlvbiBhKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX12YXIgcj1mdW5jdGlvbigpe2Zvcih2YXIgZT1cInRyYW5zZm9ybSBXZWJraXRUcmFuc2Zvcm0gTW96VHJhbnNmb3JtXCIuc3BsaXQoXCIgXCIpLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxvPTA7bzxlLmxlbmd0aDtvKyspaWYodCYmdm9pZCAwIT09dC5zdHlsZVtlW29dXSlyZXR1cm4gZVtvXTtyZXR1cm4hMX0oKSxiPXZvaWQgMCx2PXZvaWQgMCxsPXZvaWQgMCxzPSExLGM9ITE7ZnVuY3Rpb24gdShlKXtiPWkud2luZG93LmlubmVyV2lkdGh8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCx2PWkud2luZG93LmlubmVySGVpZ2h0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LFwib2JqZWN0XCIhPT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOnAoZSkpfHxcImxvYWRcIiE9PWUudHlwZSYmXCJkb20tbG9hZGVkXCIhPT1lLnR5cGV8fChzPSEwKX11KCksaS53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHUpLGkud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLHUpLGkud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdSksKDAsby5kZWZhdWx0KShmdW5jdGlvbigpe3Uoe3R5cGU6XCJkb20tbG9hZGVkXCJ9KX0pO3ZhciBtPVtdLGY9ITE7ZnVuY3Rpb24geSgpe2lmKG0ubGVuZ3RoKXtsPXZvaWQgMCE9PWkud2luZG93LnBhZ2VZT2Zmc2V0P2kud2luZG93LnBhZ2VZT2Zmc2V0Oihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR8fGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZXx8ZG9jdW1lbnQuYm9keSkuc2Nyb2xsVG9wO3ZhciB0PXN8fCFmfHxmLndpZHRoIT09Ynx8Zi5oZWlnaHQhPT12LG89Y3x8dHx8IWZ8fGYueSE9PWw7Yz1zPSExLCh0fHxvKSYmKG0uZm9yRWFjaChmdW5jdGlvbihlKXt0JiZlLm9uUmVzaXplKCksbyYmZS5vblNjcm9sbCgpfSksZj17d2lkdGg6YixoZWlnaHQ6dix5Omx9KSwoMCxuLmRlZmF1bHQpKHkpfX12YXIgZz0hIWUuUmVzaXplT2JzZXJ2ZXImJm5ldyBlLlJlc2l6ZU9ic2VydmVyKGZ1bmN0aW9uKGUpe2UmJmUubGVuZ3RoJiYoMCxuLmRlZmF1bHQpKGZ1bmN0aW9uKCl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudGFyZ2V0JiZlLnRhcmdldC5qYXJhbGxheCYmKHN8fGUudGFyZ2V0LmphcmFsbGF4Lm9uUmVzaXplKCksYz0hMCl9KX0pfSksaD0wLHg9ZnVuY3Rpb24oKXtmdW5jdGlvbiB1KGUsdCl7IWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyx1KTt2YXIgbz10aGlzO28uaW5zdGFuY2VJRD1oKyssby4kaXRlbT1lLG8uZGVmYXVsdHM9e3R5cGU6XCJzY3JvbGxcIixzcGVlZDouNSxpbWdTcmM6bnVsbCxpbWdFbGVtZW50OlwiLmphcmFsbGF4LWltZ1wiLGltZ1NpemU6XCJjb3ZlclwiLGltZ1Bvc2l0aW9uOlwiNTAlIDUwJVwiLGltZ1JlcGVhdDpcIm5vLXJlcGVhdFwiLGtlZXBJbWc6ITEsZWxlbWVudEluVmlld3BvcnQ6bnVsbCx6SW5kZXg6LTEwMCxkaXNhYmxlUGFyYWxsYXg6ITEsZGlzYWJsZVZpZGVvOiExLGF1dG9tYXRpY1Jlc2l6ZTohMCx2aWRlb1NyYzpudWxsLHZpZGVvU3RhcnRUaW1lOjAsdmlkZW9FbmRUaW1lOjAsdmlkZW9Wb2x1bWU6MCx2aWRlb1BsYXlPbmx5VmlzaWJsZTohMCxvblNjcm9sbDpudWxsLG9uSW5pdDpudWxsLG9uRGVzdHJveTpudWxsLG9uQ292ZXJJbWFnZTpudWxsfTt2YXIgbj1vLiRpdGVtLmdldEF0dHJpYnV0ZShcImRhdGEtamFyYWxsYXhcIiksaT1KU09OLnBhcnNlKG58fFwie31cIik7biYmY29uc29sZS53YXJuKFwiRGV0ZWN0ZWQgdXNhZ2Ugb2YgZGVwcmVjYXRlZCBkYXRhLWphcmFsbGF4IEpTT04gb3B0aW9ucywgeW91IHNob3VsZCB1c2UgcHVyZSBkYXRhLWF0dHJpYnV0ZSBvcHRpb25zLiBTZWUgaW5mbyBoZXJlIC0gaHR0cHM6Ly9naXRodWIuY29tL25rLW8vamFyYWxsYXgvaXNzdWVzLzUzXCIpO3ZhciBhPW8uJGl0ZW0uZGF0YXNldHx8e30scj17fTtpZihPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWUuc3Vic3RyKDAsMSkudG9Mb3dlckNhc2UoKStlLnN1YnN0cigxKTt0JiZ2b2lkIDAhPT1vLmRlZmF1bHRzW3RdJiYoclt0XT1hW2VdKX0pLG8ub3B0aW9ucz1vLmV4dGVuZCh7fSxvLmRlZmF1bHRzLGkscix0KSxvLnB1cmVPcHRpb25zPW8uZXh0ZW5kKHt9LG8ub3B0aW9ucyksT2JqZWN0LmtleXMoby5vcHRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1widHJ1ZVwiPT09by5vcHRpb25zW2VdP28ub3B0aW9uc1tlXT0hMDpcImZhbHNlXCI9PT1vLm9wdGlvbnNbZV0mJihvLm9wdGlvbnNbZV09ITEpfSksby5vcHRpb25zLnNwZWVkPU1hdGgubWluKDIsTWF0aC5tYXgoLTEscGFyc2VGbG9hdChvLm9wdGlvbnMuc3BlZWQpKSksKG8ub3B0aW9ucy5ub0FuZHJvaWR8fG8ub3B0aW9ucy5ub0lvcykmJihjb25zb2xlLndhcm4oXCJEZXRlY3RlZCB1c2FnZSBvZiBkZXByZWNhdGVkIG5vQW5kcm9pZCBvciBub0lvcyBvcHRpb25zLCB5b3Ugc2hvdWxkIHVzZSBkaXNhYmxlUGFyYWxsYXggb3B0aW9uLiBTZWUgaW5mbyBoZXJlIC0gaHR0cHM6Ly9naXRodWIuY29tL25rLW8vamFyYWxsYXgvI2Rpc2FibGUtb24tbW9iaWxlLWRldmljZXNcIiksby5vcHRpb25zLmRpc2FibGVQYXJhbGxheHx8KG8ub3B0aW9ucy5ub0lvcyYmby5vcHRpb25zLm5vQW5kcm9pZD9vLm9wdGlvbnMuZGlzYWJsZVBhcmFsbGF4PS9pUGFkfGlQaG9uZXxpUG9kfEFuZHJvaWQvOm8ub3B0aW9ucy5ub0lvcz9vLm9wdGlvbnMuZGlzYWJsZVBhcmFsbGF4PS9pUGFkfGlQaG9uZXxpUG9kLzpvLm9wdGlvbnMubm9BbmRyb2lkJiYoby5vcHRpb25zLmRpc2FibGVQYXJhbGxheD0vQW5kcm9pZC8pKSksXCJzdHJpbmdcIj09dHlwZW9mIG8ub3B0aW9ucy5kaXNhYmxlUGFyYWxsYXgmJihvLm9wdGlvbnMuZGlzYWJsZVBhcmFsbGF4PW5ldyBSZWdFeHAoby5vcHRpb25zLmRpc2FibGVQYXJhbGxheCkpLG8ub3B0aW9ucy5kaXNhYmxlUGFyYWxsYXggaW5zdGFuY2VvZiBSZWdFeHApe3ZhciBsPW8ub3B0aW9ucy5kaXNhYmxlUGFyYWxsYXg7by5vcHRpb25zLmRpc2FibGVQYXJhbGxheD1mdW5jdGlvbigpe3JldHVybiBsLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9fWlmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG8ub3B0aW9ucy5kaXNhYmxlUGFyYWxsYXgmJihvLm9wdGlvbnMuZGlzYWJsZVBhcmFsbGF4PWZ1bmN0aW9uKCl7cmV0dXJuITF9KSxcInN0cmluZ1wiPT10eXBlb2Ygby5vcHRpb25zLmRpc2FibGVWaWRlbyYmKG8ub3B0aW9ucy5kaXNhYmxlVmlkZW89bmV3IFJlZ0V4cChvLm9wdGlvbnMuZGlzYWJsZVZpZGVvKSksby5vcHRpb25zLmRpc2FibGVWaWRlbyBpbnN0YW5jZW9mIFJlZ0V4cCl7dmFyIHM9by5vcHRpb25zLmRpc2FibGVWaWRlbztvLm9wdGlvbnMuZGlzYWJsZVZpZGVvPWZ1bmN0aW9uKCl7cmV0dXJuIHMudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX19XCJmdW5jdGlvblwiIT10eXBlb2Ygby5vcHRpb25zLmRpc2FibGVWaWRlbyYmKG8ub3B0aW9ucy5kaXNhYmxlVmlkZW89ZnVuY3Rpb24oKXtyZXR1cm4hMX0pO3ZhciBjPW8ub3B0aW9ucy5lbGVtZW50SW5WaWV3cG9ydDtjJiZcIm9iamVjdFwiPT09KHZvaWQgMD09PWM/XCJ1bmRlZmluZWRcIjpwKGMpKSYmdm9pZCAwIT09Yy5sZW5ndGgmJihjPWQoYywxKVswXSk7YyBpbnN0YW5jZW9mIEVsZW1lbnR8fChjPW51bGwpLG8ub3B0aW9ucy5lbGVtZW50SW5WaWV3cG9ydD1jLG8uaW1hZ2U9e3NyYzpvLm9wdGlvbnMuaW1nU3JjfHxudWxsLCRjb250YWluZXI6bnVsbCx1c2VJbWdUYWc6ITEscG9zaXRpb246L2lQYWR8aVBob25lfGlQb2R8QW5kcm9pZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KT9cImFic29sdXRlXCI6XCJmaXhlZFwifSxvLmluaXRJbWcoKSYmby5jYW5Jbml0UGFyYWxsYXgoKSYmby5pbml0KCl9cmV0dXJuIHQodSxbe2tleTpcImNzc1wiLHZhbHVlOmZ1bmN0aW9uKHQsbyl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIG8/aS53aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5nZXRQcm9wZXJ0eVZhbHVlKG8pOihvLnRyYW5zZm9ybSYmciYmKG9bcl09by50cmFuc2Zvcm0pLE9iamVjdC5rZXlzKG8pLmZvckVhY2goZnVuY3Rpb24oZSl7dC5zdHlsZVtlXT1vW2VdfSksdCl9fSx7a2V5OlwiZXh0ZW5kXCIsdmFsdWU6ZnVuY3Rpb24obyl7dmFyIG49YXJndW1lbnRzO3JldHVybiBvPW98fHt9LE9iamVjdC5rZXlzKGFyZ3VtZW50cykuZm9yRWFjaChmdW5jdGlvbih0KXtuW3RdJiZPYmplY3Qua2V5cyhuW3RdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe29bZV09blt0XVtlXX0pfSksb319LHtrZXk6XCJnZXRXaW5kb3dEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6YixoZWlnaHQ6dix5Omx9fX0se2tleTpcImluaXRJbWdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMuaW1nRWxlbWVudDtyZXR1cm4gdCYmXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PWUuJGl0ZW0ucXVlcnlTZWxlY3Rvcih0KSksdCBpbnN0YW5jZW9mIEVsZW1lbnR8fCh0PW51bGwpLHQmJihlLm9wdGlvbnMua2VlcEltZz9lLmltYWdlLiRpdGVtPXQuY2xvbmVOb2RlKCEwKTooZS5pbWFnZS4kaXRlbT10LGUuaW1hZ2UuJGl0ZW1QYXJlbnQ9dC5wYXJlbnROb2RlKSxlLmltYWdlLnVzZUltZ1RhZz0hMCksISFlLmltYWdlLiRpdGVtfHwobnVsbD09PWUuaW1hZ2Uuc3JjJiYoZS5pbWFnZS5zcmM9ZS5jc3MoZS4kaXRlbSxcImJhY2tncm91bmQtaW1hZ2VcIikucmVwbGFjZSgvXnVybFxcKFsnXCJdPy9nLFwiXCIpLnJlcGxhY2UoL1snXCJdP1xcKSQvZyxcIlwiKSksISghZS5pbWFnZS5zcmN8fFwibm9uZVwiPT09ZS5pbWFnZS5zcmMpKX19LHtrZXk6XCJjYW5Jbml0UGFyYWxsYXhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiByJiYhdGhpcy5vcHRpb25zLmRpc2FibGVQYXJhbGxheCgpfX0se2tleTpcImluaXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDowLGxlZnQ6MCx3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCIsb3ZlcmZsb3c6XCJoaWRkZW5cIixwb2ludGVyRXZlbnRzOlwibm9uZVwifSxvPXt9O2lmKCFlLm9wdGlvbnMua2VlcEltZyl7dmFyIG49ZS4kaXRlbS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKTtpZihuJiZlLiRpdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtamFyYWxsYXgtb3JpZ2luYWwtc3R5bGVzXCIsbiksZS5pbWFnZS51c2VJbWdUYWcpe3ZhciBpPWUuaW1hZ2UuJGl0ZW0uZ2V0QXR0cmlidXRlKFwic3R5bGVcIik7aSYmZS5pbWFnZS4kaXRlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWphcmFsbGF4LW9yaWdpbmFsLXN0eWxlc1wiLGkpfX1pZihcInN0YXRpY1wiPT09ZS5jc3MoZS4kaXRlbSxcInBvc2l0aW9uXCIpJiZlLmNzcyhlLiRpdGVtLHtwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KSxcImF1dG9cIj09PWUuY3NzKGUuJGl0ZW0sXCJ6LWluZGV4XCIpJiZlLmNzcyhlLiRpdGVtLHt6SW5kZXg6MH0pLGUuaW1hZ2UuJGNvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGUuY3NzKGUuaW1hZ2UuJGNvbnRhaW5lcix0KSxlLmNzcyhlLmltYWdlLiRjb250YWluZXIse1wiei1pbmRleFwiOmUub3B0aW9ucy56SW5kZXh9KSxlLmltYWdlLiRjb250YWluZXIuc2V0QXR0cmlidXRlKFwiaWRcIixcImphcmFsbGF4LWNvbnRhaW5lci1cIitlLmluc3RhbmNlSUQpLGUuJGl0ZW0uYXBwZW5kQ2hpbGQoZS5pbWFnZS4kY29udGFpbmVyKSxlLmltYWdlLnVzZUltZ1RhZz9vPWUuZXh0ZW5kKHtcIm9iamVjdC1maXRcIjplLm9wdGlvbnMuaW1nU2l6ZSxcIm9iamVjdC1wb3NpdGlvblwiOmUub3B0aW9ucy5pbWdQb3NpdGlvbixcImZvbnQtZmFtaWx5XCI6XCJvYmplY3QtZml0OiBcIitlLm9wdGlvbnMuaW1nU2l6ZStcIjsgb2JqZWN0LXBvc2l0aW9uOiBcIitlLm9wdGlvbnMuaW1nUG9zaXRpb24rXCI7XCIsXCJtYXgtd2lkdGhcIjpcIm5vbmVcIn0sdCxvKTooZS5pbWFnZS4kaXRlbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGUuaW1hZ2Uuc3JjJiYobz1lLmV4dGVuZCh7XCJiYWNrZ3JvdW5kLXBvc2l0aW9uXCI6ZS5vcHRpb25zLmltZ1Bvc2l0aW9uLFwiYmFja2dyb3VuZC1zaXplXCI6ZS5vcHRpb25zLmltZ1NpemUsXCJiYWNrZ3JvdW5kLXJlcGVhdFwiOmUub3B0aW9ucy5pbWdSZXBlYXQsXCJiYWNrZ3JvdW5kLWltYWdlXCI6J3VybChcIicrZS5pbWFnZS5zcmMrJ1wiKSd9LHQsbykpKSxcIm9wYWNpdHlcIiE9PWUub3B0aW9ucy50eXBlJiZcInNjYWxlXCIhPT1lLm9wdGlvbnMudHlwZSYmXCJzY2FsZS1vcGFjaXR5XCIhPT1lLm9wdGlvbnMudHlwZSYmMSE9PWUub3B0aW9ucy5zcGVlZHx8KGUuaW1hZ2UucG9zaXRpb249XCJhYnNvbHV0ZVwiKSxcImZpeGVkXCI9PT1lLmltYWdlLnBvc2l0aW9uKWZvcih2YXIgYT0wLHI9ZS4kaXRlbTtudWxsIT09ciYmciE9PWRvY3VtZW50JiYwPT09YTspe3ZhciBsPWUuY3NzKHIsXCItd2Via2l0LXRyYW5zZm9ybVwiKXx8ZS5jc3MocixcIi1tb3otdHJhbnNmb3JtXCIpfHxlLmNzcyhyLFwidHJhbnNmb3JtXCIpO2wmJlwibm9uZVwiIT09bCYmKGE9MSxlLmltYWdlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIikscj1yLnBhcmVudE5vZGV9by5wb3NpdGlvbj1lLmltYWdlLnBvc2l0aW9uLGUuY3NzKGUuaW1hZ2UuJGl0ZW0sbyksZS5pbWFnZS4kY29udGFpbmVyLmFwcGVuZENoaWxkKGUuaW1hZ2UuJGl0ZW0pLGUuY292ZXJJbWFnZSgpLGUuY2xpcENvbnRhaW5lcigpLGUub25TY3JvbGwoITApLGUub3B0aW9ucy5hdXRvbWF0aWNSZXNpemUmJmcmJmcub2JzZXJ2ZShlLiRpdGVtKSxlLm9wdGlvbnMub25Jbml0JiZlLm9wdGlvbnMub25Jbml0LmNhbGwoZSksXCJub25lXCIhPT1lLmNzcyhlLiRpdGVtLFwiYmFja2dyb3VuZC1pbWFnZVwiKSYmZS5jc3MoZS4kaXRlbSx7XCJiYWNrZ3JvdW5kLWltYWdlXCI6XCJub25lXCJ9KSxlLmFkZFRvUGFyYWxsYXhMaXN0KCl9fSx7a2V5OlwiYWRkVG9QYXJhbGxheExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe20ucHVzaCh0aGlzKSwxPT09bS5sZW5ndGgmJnkoKX19LHtrZXk6XCJyZW1vdmVGcm9tUGFyYWxsYXhMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgbz10aGlzO20uZm9yRWFjaChmdW5jdGlvbihlLHQpe2UuaW5zdGFuY2VJRD09PW8uaW5zdGFuY2VJRCYmbS5zcGxpY2UodCwxKX0pfX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5yZW1vdmVGcm9tUGFyYWxsYXhMaXN0KCk7dmFyIHQ9ZS4kaXRlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWphcmFsbGF4LW9yaWdpbmFsLXN0eWxlc1wiKTtpZihlLiRpdGVtLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtamFyYWxsYXgtb3JpZ2luYWwtc3R5bGVzXCIpLHQ/ZS4kaXRlbS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLHQpOmUuJGl0ZW0ucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIiksZS5pbWFnZS51c2VJbWdUYWcpe3ZhciBvPWUuaW1hZ2UuJGl0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1qYXJhbGxheC1vcmlnaW5hbC1zdHlsZXNcIik7ZS5pbWFnZS4kaXRlbS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLWphcmFsbGF4LW9yaWdpbmFsLXN0eWxlc1wiKSxvP2UuaW1hZ2UuJGl0ZW0uc2V0QXR0cmlidXRlKFwic3R5bGVcIix0KTplLmltYWdlLiRpdGVtLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpLGUuaW1hZ2UuJGl0ZW1QYXJlbnQmJmUuaW1hZ2UuJGl0ZW1QYXJlbnQuYXBwZW5kQ2hpbGQoZS5pbWFnZS4kaXRlbSl9ZS4kY2xpcFN0eWxlcyYmZS4kY2xpcFN0eWxlcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUuJGNsaXBTdHlsZXMpLGUuaW1hZ2UuJGNvbnRhaW5lciYmZS5pbWFnZS4kY29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZS5pbWFnZS4kY29udGFpbmVyKSxlLm9wdGlvbnMub25EZXN0cm95JiZlLm9wdGlvbnMub25EZXN0cm95LmNhbGwoZSksZGVsZXRlIGUuJGl0ZW0uamFyYWxsYXh9fSx7a2V5OlwiY2xpcENvbnRhaW5lclwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoXCJmaXhlZFwiPT09dGhpcy5pbWFnZS5wb3NpdGlvbil7dmFyIGU9dGhpcyx0PWUuaW1hZ2UuJGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPXQud2lkdGgsbj10LmhlaWdodDtpZighZS4kY2xpcFN0eWxlcyllLiRjbGlwU3R5bGVzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSxlLiRjbGlwU3R5bGVzLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHQvY3NzXCIpLGUuJGNsaXBTdHlsZXMuc2V0QXR0cmlidXRlKFwiaWRcIixcImphcmFsbGF4LWNsaXAtXCIrZS5pbnN0YW5jZUlEKSwoZG9jdW1lbnQuaGVhZHx8ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdKS5hcHBlbmRDaGlsZChlLiRjbGlwU3R5bGVzKTt2YXIgaT1cIiNqYXJhbGxheC1jb250YWluZXItXCIrZS5pbnN0YW5jZUlEK1wiIHtcXG4gICAgICAgICAgIGNsaXA6IHJlY3QoMCBcIitvK1wicHggXCIrbitcInB4IDApO1xcbiAgICAgICAgICAgY2xpcDogcmVjdCgwLCBcIitvK1wicHgsIFwiK24rXCJweCwgMCk7XFxuICAgICAgICB9XCI7ZS4kY2xpcFN0eWxlcy5zdHlsZVNoZWV0P2UuJGNsaXBTdHlsZXMuc3R5bGVTaGVldC5jc3NUZXh0PWk6ZS4kY2xpcFN0eWxlcy5pbm5lckhUTUw9aX19fSx7a2V5OlwiY292ZXJJbWFnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuaW1hZ2UuJGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPXQuaGVpZ2h0LG49ZS5vcHRpb25zLnNwZWVkLGk9XCJzY3JvbGxcIj09PWUub3B0aW9ucy50eXBlfHxcInNjcm9sbC1vcGFjaXR5XCI9PT1lLm9wdGlvbnMudHlwZSxhPTAscj1vLGw9MDtyZXR1cm4gaSYmKGE9bjwwP24qTWF0aC5tYXgobyx2KTpuKihvK3YpLDE8bj9yPU1hdGguYWJzKGEtdik6bjwwP3I9YS9uK01hdGguYWJzKGEpOnIrPU1hdGguYWJzKHYtbykqKDEtbiksYS89MiksZS5wYXJhbGxheFNjcm9sbERpc3RhbmNlPWEsbD1pPyh2LXIpLzI6KG8tcikvMixlLmNzcyhlLmltYWdlLiRpdGVtLHtoZWlnaHQ6citcInB4XCIsbWFyZ2luVG9wOmwrXCJweFwiLGxlZnQ6XCJmaXhlZFwiPT09ZS5pbWFnZS5wb3NpdGlvbj90LmxlZnQrXCJweFwiOlwiMFwiLHdpZHRoOnQud2lkdGgrXCJweFwifSksZS5vcHRpb25zLm9uQ292ZXJJbWFnZSYmZS5vcHRpb25zLm9uQ292ZXJJbWFnZS5jYWxsKGUpLHtpbWFnZTp7aGVpZ2h0OnIsbWFyZ2luVG9wOmx9LGNvbnRhaW5lcjp0fX19LHtrZXk6XCJpc1Zpc2libGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRWxlbWVudEluVmlld3BvcnR8fCExfX0se2tleTpcIm9uU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxvPXQuJGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbj1vLnRvcCxpPW8uaGVpZ2h0LGE9e30scj1vO2lmKHQub3B0aW9ucy5lbGVtZW50SW5WaWV3cG9ydCYmKHI9dC5vcHRpb25zLmVsZW1lbnRJblZpZXdwb3J0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSx0LmlzRWxlbWVudEluVmlld3BvcnQ9MDw9ci5ib3R0b20mJjA8PXIucmlnaHQmJnIudG9wPD12JiZyLmxlZnQ8PWIsZXx8dC5pc0VsZW1lbnRJblZpZXdwb3J0KXt2YXIgbD1NYXRoLm1heCgwLG4pLHM9TWF0aC5tYXgoMCxpK24pLGM9TWF0aC5tYXgoMCwtbiksdT1NYXRoLm1heCgwLG4raS12KSxkPU1hdGgubWF4KDAsaS0obitpLXYpKSxwPU1hdGgubWF4KDAsLW4rdi1pKSxtPTEtMioodi1uKS8oditpKSxmPTE7aWYoaTx2P2Y9MS0oY3x8dSkvaTpzPD12P2Y9cy92OmQ8PXYmJihmPWQvdiksXCJvcGFjaXR5XCIhPT10Lm9wdGlvbnMudHlwZSYmXCJzY2FsZS1vcGFjaXR5XCIhPT10Lm9wdGlvbnMudHlwZSYmXCJzY3JvbGwtb3BhY2l0eVwiIT09dC5vcHRpb25zLnR5cGV8fChhLnRyYW5zZm9ybT1cInRyYW5zbGF0ZTNkKDAsMCwwKVwiLGEub3BhY2l0eT1mKSxcInNjYWxlXCI9PT10Lm9wdGlvbnMudHlwZXx8XCJzY2FsZS1vcGFjaXR5XCI9PT10Lm9wdGlvbnMudHlwZSl7dmFyIHk9MTt0Lm9wdGlvbnMuc3BlZWQ8MD95LT10Lm9wdGlvbnMuc3BlZWQqZjp5Kz10Lm9wdGlvbnMuc3BlZWQqKDEtZiksYS50cmFuc2Zvcm09XCJzY2FsZShcIit5K1wiKSB0cmFuc2xhdGUzZCgwLDAsMClcIn1pZihcInNjcm9sbFwiPT09dC5vcHRpb25zLnR5cGV8fFwic2Nyb2xsLW9wYWNpdHlcIj09PXQub3B0aW9ucy50eXBlKXt2YXIgZz10LnBhcmFsbGF4U2Nyb2xsRGlzdGFuY2UqbTtcImFic29sdXRlXCI9PT10LmltYWdlLnBvc2l0aW9uJiYoZy09biksYS50cmFuc2Zvcm09XCJ0cmFuc2xhdGUzZCgwLFwiK2crXCJweCwwKVwifXQuY3NzKHQuaW1hZ2UuJGl0ZW0sYSksdC5vcHRpb25zLm9uU2Nyb2xsJiZ0Lm9wdGlvbnMub25TY3JvbGwuY2FsbCh0LHtzZWN0aW9uOm8sYmVmb3JlVG9wOmwsYmVmb3JlVG9wRW5kOnMsYWZ0ZXJUb3A6YyxiZWZvcmVCb3R0b206dSxiZWZvcmVCb3R0b21FbmQ6ZCxhZnRlckJvdHRvbTpwLHZpc2libGVQZXJjZW50OmYsZnJvbVZpZXdwb3J0Q2VudGVyOm19KX19fSx7a2V5Olwib25SZXNpemVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY292ZXJJbWFnZSgpLHRoaXMuY2xpcENvbnRhaW5lcigpfX1dKSx1fSgpLHc9ZnVuY3Rpb24oZSl7KFwib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIEhUTUxFbGVtZW50P1widW5kZWZpbmVkXCI6cChIVE1MRWxlbWVudCkpP2UgaW5zdGFuY2VvZiBIVE1MRWxlbWVudDplJiZcIm9iamVjdFwiPT09KHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpwKGUpKSYmbnVsbCE9PWUmJjE9PT1lLm5vZGVUeXBlJiZcInN0cmluZ1wiPT10eXBlb2YgZS5ub2RlTmFtZSkmJihlPVtlXSk7Zm9yKHZhciB0PWFyZ3VtZW50c1sxXSxvPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSxuPWUubGVuZ3RoLGk9MCxhPXZvaWQgMDtpPG47aSsrKWlmKFwib2JqZWN0XCI9PT0odm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOnAodCkpfHx2b2lkIDA9PT10P2VbaV0uamFyYWxsYXh8fChlW2ldLmphcmFsbGF4PW5ldyB4KGVbaV0sdCkpOmVbaV0uamFyYWxsYXgmJihhPWVbaV0uamFyYWxsYXhbdF0uYXBwbHkoZVtpXS5qYXJhbGxheCxvKSksdm9pZCAwIT09YSlyZXR1cm4gYTtyZXR1cm4gZX07dy5jb25zdHJ1Y3Rvcj14LCQuZGVmYXVsdD13fSkuY2FsbCgkLGooMikpfSxmdW5jdGlvbihlLHQsbyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49bygwKSxpPW4ucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxuLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8bi5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGUpe3ZhciB0PStuZXcgRGF0ZSxvPU1hdGgubWF4KDAsMTYtKHQtYSkpLG49c2V0VGltZW91dChlLG8pO3JldHVybiBhPXQsbn0sYT0rbmV3IERhdGU7dmFyIHI9bi5jYW5jZWxBbmltYXRpb25GcmFtZXx8bi53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8bi5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8Y2xlYXJUaW1lb3V0O0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kJiYoaT1pLmJpbmQobikscj1yLmJpbmQobikpLChlLmV4cG9ydHM9aSkuY2FuY2VsPXJ9XSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1qYXJhbGxheC5taW4uanMubWFwXG4iLCJcbi8qIVxuICogaW4tdmlldyAwLjYuMSAtIEdldCBub3RpZmllZCB3aGVuIGEgRE9NIGVsZW1lbnQgZW50ZXJzIG9yIGV4aXRzIHRoZSB2aWV3cG9ydC5cbiAqIENvcHlyaWdodCAoYykgMjAxNiBDYW0gV2llZ2VydCA8Y2FtQGNhbXdpZWdlcnQuY29tPiAtIGh0dHBzOi8vY2Ftd2llZ2VydC5naXRodWIuaW8vaW4tdmlld1xuICogTGljZW5zZTogTUlUXG4gKi9cbiBcbiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuaW5WaWV3PWUoKTp0LmluVmlldz1lKCl9KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyKXtpZihuW3JdKXJldHVybiBuW3JdLmV4cG9ydHM7dmFyIGk9bltyXT17ZXhwb3J0czp7fSxpZDpyLGxvYWRlZDohMX07cmV0dXJuIHRbcl0uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsZSksaS5sb2FkZWQ9ITAsaS5leHBvcnRzfXZhciBuPXt9O3JldHVybiBlLm09dCxlLmM9bixlLnA9XCJcIixlKDApfShbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntcImRlZmF1bHRcIjp0fX12YXIgaT1uKDIpLG89cihpKTt0LmV4cG9ydHM9b1tcImRlZmF1bHRcIl19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4gbnVsbCE9dCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7XCJkZWZhdWx0XCI6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9big5KSxvPXIoaSksdT1uKDMpLGY9cih1KSxzPW4oNCksYz1mdW5jdGlvbigpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpe3ZhciB0PTEwMCxlPVtcInNjcm9sbFwiLFwicmVzaXplXCIsXCJsb2FkXCJdLG49e2hpc3Rvcnk6W119LHI9e29mZnNldDp7fSx0aHJlc2hvbGQ6MCx0ZXN0OnMuaW5WaWV3cG9ydH0saT0oMCxvW1wiZGVmYXVsdFwiXSkoZnVuY3Rpb24oKXtuLmhpc3RvcnkuZm9yRWFjaChmdW5jdGlvbih0KXtuW3RdLmNoZWNrKCl9KX0sdCk7ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBhZGRFdmVudExpc3RlbmVyKHQsaSl9KSx3aW5kb3cuTXV0YXRpb25PYnNlcnZlciYmYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbigpe25ldyBNdXRhdGlvbk9ic2VydmVyKGkpLm9ic2VydmUoZG9jdW1lbnQuYm9keSx7YXR0cmlidXRlczohMCxjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfSk7dmFyIHU9ZnVuY3Rpb24odCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe3ZhciBlPVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0KSk7cmV0dXJuIG4uaGlzdG9yeS5pbmRleE9mKHQpPi0xP25bdF0uZWxlbWVudHM9ZTooblt0XT0oMCxmW1wiZGVmYXVsdFwiXSkoZSxyKSxuLmhpc3RvcnkucHVzaCh0KSksblt0XX19O3JldHVybiB1Lm9mZnNldD1mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiByLm9mZnNldDt2YXIgZT1mdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdH07cmV0dXJuW1widG9wXCIsXCJyaWdodFwiLFwiYm90dG9tXCIsXCJsZWZ0XCJdLmZvckVhY2goZSh0KT9mdW5jdGlvbihlKXtyZXR1cm4gci5vZmZzZXRbZV09dH06ZnVuY3Rpb24obil7cmV0dXJuIGUodFtuXSk/ci5vZmZzZXRbbl09dFtuXTpudWxsfSksci5vZmZzZXR9LHUudGhyZXNob2xkPWZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0Pj0wJiZ0PD0xP3IudGhyZXNob2xkPXQ6ci50aHJlc2hvbGR9LHUudGVzdD1mdW5jdGlvbih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3IudGVzdD10OnIudGVzdH0sdS5pcz1mdW5jdGlvbih0KXtyZXR1cm4gci50ZXN0KHQscil9LHUub2Zmc2V0KDApLHV9fTtlW1wiZGVmYXVsdFwiXT1jKCl9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHIpe24odGhpcyx0KSx0aGlzLm9wdGlvbnM9cix0aGlzLmVsZW1lbnRzPWUsdGhpcy5jdXJyZW50PVtdLHRoaXMuaGFuZGxlcnM9e2VudGVyOltdLGV4aXQ6W119LHRoaXMuc2luZ2xlcz17ZW50ZXI6W10sZXhpdDpbXX19cmV0dXJuIHIodCxbe2tleTpcImNoZWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49dC5vcHRpb25zLnRlc3QoZSx0Lm9wdGlvbnMpLHI9dC5jdXJyZW50LmluZGV4T2YoZSksaT1yPi0xLG89biYmIWksdT0hbiYmaTtvJiYodC5jdXJyZW50LnB1c2goZSksdC5lbWl0KFwiZW50ZXJcIixlKSksdSYmKHQuY3VycmVudC5zcGxpY2UociwxKSx0LmVtaXQoXCJleGl0XCIsZSkpfSksdGhpc319LHtrZXk6XCJvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuaGFuZGxlcnNbdF0ucHVzaChlKSx0aGlzfX0se2tleTpcIm9uY2VcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnNpbmdsZXNbdF0udW5zaGlmdChlKSx0aGlzfX0se2tleTpcImVtaXRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2Zvcig7dGhpcy5zaW5nbGVzW3RdLmxlbmd0aDspdGhpcy5zaW5nbGVzW3RdLnBvcCgpKGUpO2Zvcih2YXIgbj10aGlzLmhhbmRsZXJzW3RdLmxlbmd0aDstLW4+LTE7KXRoaXMuaGFuZGxlcnNbdF1bbl0oZSk7cmV0dXJuIHRoaXN9fV0pLHR9KCk7ZVtcImRlZmF1bHRcIl09ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGkodCxlKX19LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe3ZhciBuPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscj1uLnRvcCxpPW4ucmlnaHQsbz1uLmJvdHRvbSx1PW4ubGVmdCxmPW4ud2lkdGgscz1uLmhlaWdodCxjPXt0Om8scjp3aW5kb3cuaW5uZXJXaWR0aC11LGI6d2luZG93LmlubmVySGVpZ2h0LXIsbDppfSxhPXt4OmUudGhyZXNob2xkKmYseTplLnRocmVzaG9sZCpzfTtyZXR1cm4gYy50PmUub2Zmc2V0LnRvcCthLnkmJmMucj5lLm9mZnNldC5yaWdodCthLngmJmMuYj5lLm9mZnNldC5ib3R0b20rYS55JiZjLmw+ZS5vZmZzZXQubGVmdCthLnh9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5pblZpZXdwb3J0PW59LGZ1bmN0aW9uKHQsZSl7KGZ1bmN0aW9uKGUpe3ZhciBuPVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlJiZlLk9iamVjdD09PU9iamVjdCYmZTt0LmV4cG9ydHM9bn0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNSksaT1cIm9iamVjdFwiPT10eXBlb2Ygc2VsZiYmc2VsZiYmc2VsZi5PYmplY3Q9PT1PYmplY3QmJnNlbGYsbz1yfHxpfHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7dC5leHBvcnRzPW99LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiByKHQsZSxuKXtmdW5jdGlvbiByKGUpe3ZhciBuPXgscj1tO3JldHVybiB4PW09dm9pZCAwLEU9ZSx3PXQuYXBwbHkocixuKX1mdW5jdGlvbiBhKHQpe3JldHVybiBFPXQsaj1zZXRUaW1lb3V0KGgsZSksTT9yKHQpOnd9ZnVuY3Rpb24gbCh0KXt2YXIgbj10LU8scj10LUUsaT1lLW47cmV0dXJuIF8/YyhpLGctcik6aX1mdW5jdGlvbiBkKHQpe3ZhciBuPXQtTyxyPXQtRTtyZXR1cm4gdm9pZCAwPT09T3x8bj49ZXx8bjwwfHxfJiZyPj1nfWZ1bmN0aW9uIGgoKXt2YXIgdD1vKCk7cmV0dXJuIGQodCk/cCh0KTp2b2lkKGo9c2V0VGltZW91dChoLGwodCkpKX1mdW5jdGlvbiBwKHQpe3JldHVybiBqPXZvaWQgMCxUJiZ4P3IodCk6KHg9bT12b2lkIDAsdyl9ZnVuY3Rpb24gdigpe3ZvaWQgMCE9PWomJmNsZWFyVGltZW91dChqKSxFPTAseD1PPW09aj12b2lkIDB9ZnVuY3Rpb24geSgpe3JldHVybiB2b2lkIDA9PT1qP3c6cChvKCkpfWZ1bmN0aW9uIGIoKXt2YXIgdD1vKCksbj1kKHQpO2lmKHg9YXJndW1lbnRzLG09dGhpcyxPPXQsbil7aWYodm9pZCAwPT09ailyZXR1cm4gYShPKTtpZihfKXJldHVybiBqPXNldFRpbWVvdXQoaCxlKSxyKE8pfXJldHVybiB2b2lkIDA9PT1qJiYoaj1zZXRUaW1lb3V0KGgsZSkpLHd9dmFyIHgsbSxnLHcsaixPLEU9MCxNPSExLF89ITEsVD0hMDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoZik7cmV0dXJuIGU9dShlKXx8MCxpKG4pJiYoTT0hIW4ubGVhZGluZyxfPVwibWF4V2FpdFwiaW4gbixnPV8/cyh1KG4ubWF4V2FpdCl8fDAsZSk6ZyxUPVwidHJhaWxpbmdcImluIG4/ISFuLnRyYWlsaW5nOlQpLGIuY2FuY2VsPXYsYi5mbHVzaD15LGJ9dmFyIGk9bigxKSxvPW4oOCksdT1uKDEwKSxmPVwiRXhwZWN0ZWQgYSBmdW5jdGlvblwiLHM9TWF0aC5tYXgsYz1NYXRoLm1pbjt0LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNiksaT1mdW5jdGlvbigpe3JldHVybiByLkRhdGUubm93KCl9O3QuZXhwb3J0cz1pfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gcih0LGUsbil7dmFyIHI9ITAsZj0hMDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IodSk7cmV0dXJuIG8obikmJihyPVwibGVhZGluZ1wiaW4gbj8hIW4ubGVhZGluZzpyLGY9XCJ0cmFpbGluZ1wiaW4gbj8hIW4udHJhaWxpbmc6ZiksaSh0LGUse2xlYWRpbmc6cixtYXhXYWl0OmUsdHJhaWxpbmc6Zn0pfXZhciBpPW4oNyksbz1uKDEpLHU9XCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCI7dC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdH10LmV4cG9ydHM9bn1dKX0pO1xuIiwidmFyIGRheSwgbW9udGgsIHllYXIsIHNlbGVjdGVkRGF0ZSwgY3VycmVudERhdGU7XG52YXIgYWdlID0gMTg7XG5cbnZhciBmdWxsVXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG52YXIgZW5kVXJsID0gZnVsbFVybC5zcGxpdCgnLycpLnBvcCgpO1xuXG5mdW5jdGlvbiBjaGVja1VybCgpIHtcbiAgaWYoZW5kVXJsID09ICdob21lLmh0bWwnICYmIGxvY2F0aW9uLmhhc2ggIT09ICdsb2FkZWQnKSB7XG4gICAgbG9jYXRpb24uaGFzaCA9ICdsb2FkZWQnO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24oJ2luZGV4Lmh0bWwnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjaGVja0FnZSgpIHtcbiAgICB2YXIgZW50ZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFnZS1nYXRlX19lbnRlclwiKTtcbiAgICBpZihlbnRlckJ0bikge1xuICAgICAgICBlbnRlckJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgIGRheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZ2UtZ2F0ZV9fZGF5Jyk7XG4gICAgICAgIG1vbnRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FnZS1nYXRlX19tb250aCcpO1xuICAgICAgICAgeWVhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZ2UtZ2F0ZV9feWVhcicpO1xuXG4gICAgICAgICBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgc2VsZWN0ZWREYXRlLnNldEZ1bGxZZWFyKCB5ZWFyLnZhbHVlLCBtb250aC52YWx1ZSAtIDEsIGRheS52YWx1ZSApO1xuICAgICAgICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgY3VycmVudERhdGUuc2V0RnVsbFllYXIoY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSAtIGFnZSk7XG5cbiAgICAgICAgIGlmKCBkYXkudmFsdWUgPT0gJ25vdHNlbGVjdGVkJyB8fCBtb250aC52YWx1ZSA9PSAnbm90c2VsZWN0ZWQnIHx8IHllYXIudmFsdWUgPT0gJ25vdHNlbGVjdGVkJyApIHtcbiAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBlbnRlciB5b3VyIGRhdGUgb2YgYmlydGgnKTtcbiAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgfSBlbHNlIGlmICgoY3VycmVudERhdGUgLSBzZWxlY3RlZERhdGUpIDwgMCkge1xuICAgICAgICAgICBhbGVydCgnRW50cnkgZGVuaWVkLCBjdXJyZW50bHkgeW91IGFyZSBub3Qgb2YgbGVnYWwgZHJpbmtpbmcgYWdlJyk7XG4gICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24oXCJob21lLmh0bWwjbG9hZGVkXCIpO1xuICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxufVxuXG5jaGVja1VybCgpO1xuY2hlY2tBZ2UoKTtcbiIsInZhciBzdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLXN1Ym1pdCcpO1xudmFyIGZ1bGxOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3RfX2Z1bGwtbmFtZScpO1xudmFyIHBob25lTnVtYmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3RfX3Bob25lJyk7XG52YXIgY29udGFjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFjdF9fZm9ybScpO1xudmFyIGNvbnRhY3RFbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbWFpbC1pbnB1dCcpO1xudmFyIHJlcXVpcmVkTmFtZU1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVxdWlyZWRfX25hbWUtbWVzc2FnZScpO1xudmFyIHJlcXVpcmVkUGhvbmVNZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlcXVpcmVkX19waG9uZS1tZXNzYWdlJyk7XG52YXIgaW5jb3JyZWN0Rm9ybWF0TWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2luY29ycmVjdF9fZm9ybWF0LW1lc3NhZ2UnKTtcblxudmFyIHZhbGlkYXRlTmFtZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIHBhdHRlcm4gPSAvXihbXjAtOV1bYS16QS1aXXswLH1cXHNbYS16QS16XXswLH0nPy0/W2EtekEtWl17Mix9XFxzPyhbYS16QS1aXXsxLH0pPykvO1xuICByZXR1cm4gcGF0dGVybi50ZXN0KG5hbWUpO1xufVxuXG52YXIgdmFsaWRhdGVQaG9uZU51bWJlciA9IGZ1bmN0aW9uKHBob25lTnVtYmVyKSB7XG4gIHZhciBwYXR0ZXJuID0gL14wKDFcXGR7OX18OVxcZHs4fSkkLztcbiAgcmV0dXJuIHBhdHRlcm4udGVzdChwaG9uZU51bWJlcik7XG59XG5cbnZhciB2YWxpZGF0ZUVtYWlsID0gZnVuY3Rpb24oZW1haWxBZGRyZXNzKSB7XG4gIHZhciBwYXR0ZXJuID0gL14oW2EtejAtOV9cXC4tXSspQChbXFxkYS16XFwuLV0rKVxcLihbYS16XFwuXXsyLDZ9KSQvO1xuICByZXR1cm4gcGF0dGVybi50ZXN0KGVtYWlsQWRkcmVzcyk7XG59XG5cbnZhciBjb250YWN0Rm9ybVZhbGlkYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgZnVsbE5hbWUuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbihldmVudCkge1xuICAgIGlmKHZhbGlkYXRlTmFtZShmdWxsTmFtZS52YWx1ZSkpIHtcbiAgICAgIGZ1bGxOYW1lLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yLWlucHV0Jyk7XG4gICAgICBpbmNvcnJlY3RGb3JtYXRNZXNzYWdlWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmctc2hvdycpO1xuICAgICAgZnVsbE5hbWUuY2xhc3NMaXN0LmFkZCgnc3VjY2Vzcy1pbnB1dCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmdWxsTmFtZS5jbGFzc0xpc3QucmVtb3ZlKCdzdWNjZXNzLWlucHV0Jyk7XG4gICAgICBmdWxsTmFtZS5jbGFzc0xpc3QuYWRkKCdlcnJvci1pbnB1dCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgcGhvbmVOdW1iZXIuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbihldmVudCkge1xuICAgIGlmKHZhbGlkYXRlUGhvbmVOdW1iZXIocGhvbmVOdW1iZXIudmFsdWUpKSB7XG4gICAgICBwaG9uZU51bWJlci5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvci1pbnB1dCcpO1xuICAgICAgaW5jb3JyZWN0Rm9ybWF0TWVzc2FnZVsxXS5jbGFzc0xpc3QucmVtb3ZlKCd3YXJuaW5nLXNob3cnKTtcbiAgICAgIHBob25lTnVtYmVyLmNsYXNzTGlzdC5hZGQoJ3N1Y2Nlc3MtaW5wdXQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGhvbmVOdW1iZXIuY2xhc3NMaXN0LnJlbW92ZSgnc3VjY2Vzcy1pbnB1dCcpO1xuICAgICAgcGhvbmVOdW1iZXIuY2xhc3NMaXN0LmFkZCgnZXJyb3ItaW5wdXQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnRhY3RFbWFpbC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYodmFsaWRhdGVFbWFpbChjb250YWN0RW1haWwudmFsdWUpKSB7XG4gICAgICBjb250YWN0RW1haWwuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3ItaW5wdXQnKTtcbiAgICAgIGNvbnRhY3RFbWFpbC5jbGFzc0xpc3QuYWRkKCdzdWNjZXNzLWlucHV0Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhY3RFbWFpbC5jbGFzc0xpc3QucmVtb3ZlKCdzdWNjZXNzLWlucHV0Jyk7XG4gICAgICBjb250YWN0RW1haWwuY2xhc3NMaXN0LmFkZCgnZXJyb3ItaW5wdXQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIHN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZihmdWxsTmFtZS52YWx1ZSA9PSAnJykge1xuICAgICAgcmVxdWlyZWROYW1lTWVzc2FnZS5jbGFzc0xpc3QuYWRkKCd3YXJuaW5nLXNob3cnKTtcbiAgICB9IGVsc2UgaWYoZnVsbE5hbWUudmFsdWUgJiYgdmFsaWRhdGVOYW1lKGZ1bGxOYW1lLnZhbHVlKSkge1xuICAgICAgICBpbmNvcnJlY3RGb3JtYXRNZXNzYWdlWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmctc2hvdycpO1xuICAgICAgICByZXF1aXJlZE5hbWVNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmctc2hvdycpO1xuICAgIH0gZWxzZSBpZihmdWxsTmFtZS52YWx1ZSAmJiAhdmFsaWRhdGVOYW1lKGZ1bGxOYW1lLnZhbHVlKSkge1xuICAgICAgICByZXF1aXJlZE5hbWVNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmctc2hvdycpO1xuICAgICAgICBpbmNvcnJlY3RGb3JtYXRNZXNzYWdlWzBdLmNsYXNzTGlzdC5hZGQoJ3dhcm5pbmctc2hvdycpO1xuICAgIH1cblxuICAgIGlmKHBob25lTnVtYmVyLnZhbHVlID09ICcnKSB7XG4gICAgICByZXF1aXJlZFBob25lTWVzc2FnZS5jbGFzc0xpc3QuYWRkKCd3YXJuaW5nLXNob3cnKTtcbiAgICB9IGVsc2UgaWYocGhvbmVOdW1iZXIudmFsdWUgJiYgdmFsaWRhdGVQaG9uZU51bWJlcihwaG9uZU51bWJlci52YWx1ZSkpIHtcbiAgICAgICAgaW5jb3JyZWN0Rm9ybWF0TWVzc2FnZVsxXS5jbGFzc0xpc3QucmVtb3ZlKCd3YXJuaW5nLXNob3cnKTtcbiAgICAgICAgcmVxdWlyZWRQaG9uZU1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSgnd2FybmluZy1zaG93Jyk7XG4gICAgfSBlbHNlIGlmKHBob25lTnVtYmVyLnZhbHVlICYmICF2YWxpZGF0ZVBob25lTnVtYmVyKHBob25lTnVtYmVyLnZhbHVlKSkge1xuICAgICAgICByZXF1aXJlZFBob25lTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCd3YXJuaW5nLXNob3cnKTtcbiAgICAgICAgaW5jb3JyZWN0Rm9ybWF0TWVzc2FnZVsxXS5jbGFzc0xpc3QuYWRkKCd3YXJuaW5nLXNob3cnKTtcbiAgICB9XG4gIH0pO1xufVxuXG5pZihjb250YWN0Rm9ybSkge1xuICBjb250YWN0Rm9ybVZhbGlkYXRpb24oKTtcbn1cbiIsInZhciBoYW1idXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGFtYnVyZ2VyJyk7XG5cbmlmKGhhbWJ1cmdlcikge1xuICBoYW1idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYoaGFtYnVyZ2VyLmNsYXNzTGlzdC5jb250YWlucygnaXMtYWN0aXZlJykpIHtcbiAgICAgIGhhbWJ1cmdlci5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGFtYnVyZ2VyLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xuICAgIH1cbiAgfSk7XG59XG4iLCJ2YXIgbWFyZ2luWSA9IDA7XG52YXIgc2Nyb2xsZXIgPSBudWxsO1xudmFyIGRlc3RpbmF0aW9uID0gMDtcblxudmFyIHNwZWVkID0gNTtcblxudmFyIGhlcm9TY3JvbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlcm9fX3Njcm9sbFwiKTtcblxuZnVuY3Rpb24gc21vb3RoU2Nyb2xsKCkge1xuICAvLyBnZXQgdGhlIG51bWJlciBvZiBwaXhlbHMgdGhlIGRvY3VtZW50IGlzIHNjcm9sbGVkIGFsb25nIHRoZSBZKHZlcnRpY2FsKSBheGlzXG4gIG1hcmdpblkgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gIC8vIGdldCB0aGUgbnVtYmVyIG9mIHBpeGVscyBkaXN0YW5jZSwgdGhlIGVsZW1lbnQgaXMgZnJvbSB0aGUgdG9wIG9mIGl0J3MgcGFyZW50IG5vZGVcbiAgZGVzdGluYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluZm8tZHJpbmtcIikub2Zmc2V0VG9wO1xuXG4gIC8vIHRpbWVvdXQgZnVuY3Rpb24gdGhhdCBleGVjdXRlcyBhZnRlciBhIHNtYWxsIGRlbGF5XG4gIHNjcm9sbGVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAvLyByZWN1cnNpdmUgZnVuY3Rpb24gY2FsbCBvbiBpdHNlbGYsICB0aGlzIGNyZWF0ZXMgdGhlIHNtb290aCBzY3JvbGwgZWZmZWN0XG4gICAgc21vb3RoU2Nyb2xsKCk7XG4gIH0sIDEpO1xuXG4gIC8vIGluY3JlbWVudCB0aGUgdmVydGljYWwgc2Nyb2xsIGJ5IDUgcGl4ZWxzIGVhY2ggdGltZSB0byBjcmVhdGUgc21vb3RoIHNjcm9sbFxuICBtYXJnaW5ZID0gbWFyZ2luWSArIHNwZWVkO1xuXG4gIC8vIHN0b3AgdGltZW91dCBmdW5jdGlvbiBleGVjdXRpbmcgd2hlbiB0aGUgdmV0aWNhbCBzY3JvbGwgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSByZXF1aXJlZCBzY3JvbGwgZGlzdGFuY2VcbiAgaWYobWFyZ2luWSA+PSBkZXN0aW5hdGlvbikge1xuICAgIGNsZWFyVGltZW91dChzY3JvbGxlcik7XG4gIH1cblxuICAvKiBjYWxsIHRoZSBzY3JvbGwgb24gdGhlIHdpbmRvdyBwYXNzaW5nIHZhbHVlcyBmb3IgdGhlIHggYW5kIHkgY29vcmRpbmF0ZXMgYXQgdGhlIHRvcCBsZWZ0LCB4ID0gMCBhcyBub3QgY29uY2VybmVkIHdpdGggeCBheGlzLFxuICAgICB5ID0gbWFyZ2luWSB3aGljaCB3aWxsIGluY3JlbWVudCBlYWNoIGJlY2F1c2Ugb2YgcmVjdXJzaW9uIGFuZCBjcmVhdGUgdGhlIHNtb290aCBzY3JvbGwgZWZmZWN0XG4gICovXG4gIHdpbmRvdy5zY3JvbGwoMCwgbWFyZ2luWSk7XG59XG5cbmlmKGhlcm9TY3JvbGwpIHtcbiAgaGVyb1Njcm9sbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAvKiAgcHJldmVudCB0aGUgYnJvd3NlcnMgZGVmYXVsdCBhY3Rpb24gZnJvbSBleGVjdXRpbmcuIEluIHRoaXMgdGhlIGRlZmF1bHQgYWN0aW9uIGlzIGEgcGFnZSByZWxvYWQgYmVjYXVzZSBhIGFuY2hvciBlbGVtZW50XG4gICAgICAgICAgd2l0aCBocmVmPVwiI1wiIGlzIGJlaW5nIGNsaWNrZWRcbiAgICAgICovXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc21vb3RoU2Nyb2xsKCk7XG4gIH0pO1xufVxuIiwiZnVuY3Rpb24gaGFuZGxlSW52aWV3KCkge1xuICB2YXIgaGVybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvJyk7XG4gIHZhciBhZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZ2UtbW9kYWwnKTtcblxuICB2YXIgYXJyRWxlbWVudHMgPSBbe1xuICAgICAgZWxlbWVudDogJy5oZXJvJ1xuICAgIH0sXG4gICAge1xuICAgICAgZWxlbWVudDogJy5hZ2UtbW9kYWwnXG4gICAgfSxcbiAgICB7XG4gICAgICBlbGVtZW50OiAnLmluZm8tZHJpbmtfX3RpdGxlJ1xuICAgIH0sXG4gICAge1xuICAgICAgZWxlbWVudDogJy5pbmZvLWRyaW5rX19kZXNjcmlwdGlvbidcbiAgICB9LFxuICAgIHtcbiAgICAgIGVsZW1lbnQ6ICcuaW5mby1kcmlua19faW1hZ2UnXG4gICAgfSxcbiAgICB7XG4gICAgICBlbGVtZW50OiAnLmluZm8tZHJpbmtfX3JlY2lwaWUnXG4gICAgfSxcbiAgICB7XG4gICAgICBlbGVtZW50OiAnLmNvbnRhY3RfX3RpdGxlJ1xuICAgIH0sXG4gICAge1xuICAgICAgZWxlbWVudDogJy5jb250YWN0X19pbnRybydcbiAgICB9LFxuICAgIHtcbiAgICAgIGVsZW1lbnQ6ICcuY29udGFjdF9fZm9ybSdcbiAgICB9LFxuICAgIHtcbiAgICAgIGVsZW1lbnQ6ICcuZm9vdGVyJ1xuICAgIH0sXG4gIF07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJFbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyckVsZW1lbnRzW2ldLmVsZW1lbnQpLmxlbmd0aCA+IDApIHtcbiAgICAgIGluVmlldyhhcnJFbGVtZW50c1tpXS5lbGVtZW50KVxuICAgICAgICAub24oJ2VudGVyJywgc2VjdGlvbiA9PiB7XG4gICAgICAgICAgc2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdpcy1pbnZpZXcnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmhhbmRsZUludmlldygpO1xuIl19
